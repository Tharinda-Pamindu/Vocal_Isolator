<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Demucs â€” Vocal Isolation</title>
  <meta name="description" content="AI-powered vocal isolation and music source separation using Meta's Demucs model." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/static/css/style.css" />
</head>
<body>

  <!-- Animated background particles -->
  <div class="bg-orbs">
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>
  </div>

  <div class="container">

    <!-- Header -->
    <header class="header">
      <div class="logo">
        <span class="logo-icon">ğŸµ</span>
        <div>
          <h1 class="logo-title">Demucs Studio</h1>
          <p class="logo-sub">AI-Powered Vocal Isolation</p>
        </div>
      </div>
      <div class="header-badge">
        <span class="dot"></span> Powered by Meta Demucs
      </div>
    </header>

    <!-- Main content -->
    <main class="main">

      <!-- Upload Card -->
      <section class="card upload-card" id="upload-section">
        <h2 class="card-title">Upload Audio</h2>
        <p class="card-desc">Drop any audio file to isolate vocals and instrumentals</p>

        <div class="drop-zone" id="drop-zone" tabindex="0" role="button" aria-label="Upload audio file">
          <div class="drop-icon">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 18V5l12-2v13"/>
              <circle cx="6" cy="18" r="3"/>
              <circle cx="18" cy="16" r="3"/>
            </svg>
          </div>
          <p class="drop-title">Drag & drop your audio file here</p>
          <p class="drop-sub">or <span class="link-style">browse files</span></p>
          <p class="drop-formats">MP3 Â· WAV Â· FLAC Â· OGG Â· M4A Â· AAC &nbsp;Â·&nbsp; Max 200 MB</p>
          <input type="file" id="file-input" accept=".mp3,.wav,.flac,.ogg,.m4a,.aac" hidden />
        </div>

        <!-- File preview -->
        <div class="file-preview hidden" id="file-preview">
          <div class="file-icon">ğŸ§</div>
          <div class="file-info">
            <span class="file-name" id="file-name"></span>
            <span class="file-size" id="file-size"></span>
          </div>
          <button class="btn-icon" id="remove-file" aria-label="Remove file" title="Remove">âœ•</button>
        </div>
      </section>

      <!-- Settings Card -->
      <section class="card settings-card" id="settings-section">
        <h2 class="card-title">Separation Settings</h2>

        <div class="setting-group">
          <label class="setting-label">Model</label>
          <div class="model-grid" id="model-grid">
            <button class="model-btn active" data-model="htdemucs" id="model-htdemucs">
              <span class="model-name">htdemucs</span>
              <span class="model-tag">Balanced</span>
              <span class="model-desc">Fast & accurate â€” recommended for most use cases</span>
            </button>
            <button class="model-btn" data-model="htdemucs_ft" id="model-htdemucs_ft">
              <span class="model-name">htdemucs_ft</span>
              <span class="model-tag best">Best Quality</span>
              <span class="model-desc">Fine-tuned model, ~4Ã— slower but finest separation</span>
            </button>
            <button class="model-btn" data-model="htdemucs_6s" id="model-htdemucs_6s">
              <span class="model-name">htdemucs_6s</span>
              <span class="model-tag">6 Stems</span>
              <span class="model-desc">Includes guitar & piano in addition to standard stems</span>
            </button>
            <button class="model-btn" data-model="mdx_q" id="model-mdx_q">
              <span class="model-name">mdx_q</span>
              <span class="model-tag fast">Fastest</span>
              <span class="model-desc">Quantized model â€” smaller size, quickest processing</span>
            </button>
          </div>
        </div>

        <div class="setting-group">
          <label class="setting-label">Output Stems</label>
          <div class="stem-toggle">
            <button class="stem-btn active" data-mode="vocals" id="mode-vocals">
              <span>ğŸ¤ Vocals Only</span>
              <small>Separated into Vocals + Instrumental</small>
            </button>
            <button class="stem-btn" data-mode="all" id="mode-all">
              <span>ğŸ¼ All Stems</span>
              <small>Vocals Â· Drums Â· Bass Â· Other</small>
            </button>
          </div>
        </div>

        <button class="btn-primary" id="process-btn" disabled>
          <span class="btn-icon-emoji">âœ¨</span>
          <span id="btn-label">Isolate Vocals</span>
        </button>
      </section>

      <!-- Progress Card -->
      <section class="card progress-card hidden" id="progress-section">
        <div class="progress-header">
          <div class="progress-spinner"></div>
          <div>
            <h2 class="card-title" style="margin-bottom:4px">Processing Audio</h2>
            <p class="card-desc" id="progress-message">Initializing Demucs model...</p>
          </div>
        </div>
        <div class="progress-bar-wrap">
          <div class="progress-bar" id="progress-bar" style="width:0%"></div>
        </div>
        <p class="progress-pct" id="progress-pct">0%</p>
      </section>

      <!-- Results Card -->
      <section class="card results-card hidden" id="results-section">
        <div class="results-header">
          <h2 class="card-title">âœ… Separation Complete</h2>
          <p class="card-desc">Your stems are ready â€” play or download below</p>
        </div>
        <div class="stems-grid" id="stems-grid">
          <!-- Stem cards injected by JS -->
        </div>
        <button class="btn-secondary" id="new-upload-btn">â†© Process Another File</button>
      </section>

      <!-- Error Card -->
      <div class="error-toast hidden" id="error-toast">
        <span>âš ï¸ </span><span id="error-msg"></span>
      </div>

    </main>

    <footer class="footer">
      Built with <a href="https://github.com/facebookresearch/demucs" target="_blank" rel="noopener">Demucs</a> by Meta AI Research &nbsp;Â·&nbsp; Running locally on your machine
    </footer>

  </div>

  <script src="/static/js/app.js"></script>
</body>
</html>
